<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body, #map-canvas { height: 100%; margin: 0; padding: 0;}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet" tpe="text/css" />
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=">
    </script>
    <script type="text/javascript">






    	//for directions
    	var directionsDisplay;
    	var directionsService = new google.maps.DirectionsService();
    	var dropOff = new google.maps.LatLng(35.91105153, -79.05145591);
      var Chicago = new google.maps.LatLng(41.850033, -87.6500523);
    	var map;
      var center;




      function initialize() {
      	directionsDisplay = new google.maps.DirectionsRenderer();

        var penImg = 'images/just-pen.png';
        var contentString = '<div id="contentStart"><img id="logo" src="images/campwrite_logo.png"><div><b>Camper dropoff</b><p class="inline">Drop off for campers is from 8:45-9:15 a.m. each day.</p></div></div>';
        var infobox= new google.maps.InfoWindow({
              content: contentString
          });

        var mapOptions = {
          center: dropOff,
          zoom: 18,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

	    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

        //connect directions service to map
        directionsDisplay.setMap(map);

        var marker = new google.maps.Marker({
            position: dropOff,
            map: map,
            icon: penImg
        });

        google.maps.event.addListener(marker, 'click', function() {
            infobox.open(map,marker);
        });

        //recalculate center on window resize
        function calculateCenter(){
          center = map.getCenter();
        }

        google.maps.event.addDomListener(map, 'idle', function() {
        calculateCenter();
          });
      google.maps.event.addDomListener(window, 'resize', function() {
        map.setCenter(center);
          });

      }

      function calcRoute(){
      	var start = document.getElementById('start').value;
      	var end = dropOff;
      	var request = {
      		origin:start,
      		destination:end,
      		travelMode: google.maps.TravelMode.DRIVING
      	};
      	directionsService.route(request, function(response, status){
      		if (status == google.maps.DirectionsStatus.OK){
      			directionsDisplay.setDirections(response);

      		}
      	});
      };

      google.maps.event.addDomListener(window, 'load', initialize);


      $(document).ready(function(){

      });

    </script>
  </head>
  <body>
  <div class="container">

  	<div class="row">
  		<div class="col-lg-12 col-sm-12">
			<div id="panel">
				<b>Directions from: </b>
			<select id="start" onchange="calcRoute();">
        <option> </option>
				<option value="35.9096047, -79.04821848">Student Stores</option>
        <option value="35.91205517, -79.05119037">Old Well</option>
        <option value="35.8994718, -79.04393767">Dean Smith Center (South campus)</option>

			</select>
		</div><!--end col-->
	</div><!--end row-->

	<div class="row">
  		<div class="col-lg-12 col-sm-12">
			<div id="map-canvas" style="height:450px;"></div>
		</div><!--end col-->
	</div><!--end row-->

</div><!--end container-->
  </body>
</html>
